dashboard-container {
  display: flex;
  height: 100%;
}

/* ---------- Sidebar (hôte) + tokens Material ----------
   Neutralise les surfaces claires / arrondis par défaut de Material 3 */
.sidebar {
    width: 260px;
    background: $sidebar-bg;
    color: $text-color;
    display: flex;
    flex-direction: column;
    padding: 0 0 8px 0;
    box-sizing: border-box;
    overflow-y: auto;

    /* Tokens Expansion Panel */
    --mat-expansion-container-background-color: transparent;
    --mat-expansion-container-text-color: #fff;
    --mat-expansion-container-shape: 0px;
    --mat-expansion-header-text-color: #fff;
    --mat-expansion-header-description-color: #fff;
    --mat-expansion-header-indicator-color: #fff;

    /* Tokens List (états) */
    --mdc-list-list-item-label-text-color: #fff;
    --mdc-list-list-item-hover-label-text-color: #fff;
    --mdc-list-list-item-focus-label-text-color: #fff;
    --mdc-list-list-item-activated-label-text-color: #fff;
    --mdc-list-list-item-selected-label-text-color: #fff;
    --mdc-list-list-item-disabled-label-text-color: rgba(255,255,255,.4);

    /* Tokens Icônes / Boutons */
    --mat-icon-color: #fff;
    --mdc-icon-button-icon-color: #fff;
    --mdc-icon-button-disabled-icon-color: rgba(255,255,255,.4);
}

/* ---------- Largeur uniforme (chaîne) ----------
   Garantit que chaque composant s'étire sur la largeur de la sidebar */
.sidebar .mat-accordion,
.sidebar .mat-expansion-panel,
.sidebar .mat-expansion-panel-header,
.sidebar .mat-expansion-panel-content,
.sidebar .mat-expansion-panel-body,
.sidebar mat-nav-list,
.sidebar mat-nav-list .mat-mdc-list-item,
.sidebar a.mat-mdc-list-item {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box;
}

/* Padding du body: 0 0 16px */
.sidebar .mat-expansion-panel-content {
    padding: 0 !important; /* retire tout wrapper padding */
}

.sidebar .mat-expansion-panel-body {
    padding: 0 0 16px !important;
}

/* Fallback (si toujours un retrait) */
:host ::ng-deep .mat-expansion-panel-body {
    padding: 0 0 16px !important;
}

/* ---------- 5. Accordéons / Panels ---------- */
.sidebar .mat-accordion {
    margin: 0;
    padding: 0;
    border: 0;
}

.sidebar .mat-expansion-panel,
.sidebar .mat-expansion-panel.mat-expansion-panel-spacing {
    margin: 0 !important;
    border: 0;
    border-bottom: 1px solid $sidebar-border;
    background: $sidebar-bg !important;    // Force fond sombre (évite fond blanc M3)
    box-shadow: none !important;
    border-radius: 0 !important;
    position: relative;
}

.sidebar .mat-expansion-panel:last-child {
    border-bottom: none;                   // Pas de bordure finale
}

/* Suppression de pseudo-surfaces internes Material */
.sidebar .mat-expansion-panel::before,
.sidebar .mat-expansion-panel::after {
    display: none !important;
}

/* ---------- Header de panel ----------
   - Poids normal par défaut
   - Gras uniquement quand panel ouvert (voir section 7) */
.sidebar .mat-expansion-panel-header {
    padding: 0 16px;
    min-height: 44px;
    font-weight: 400 !important;           // Normal (état fermé)
    background: transparent !important;
    color: inherit;
    cursor: pointer;
    border-radius: 0 !important;
    transition: background .15s, color .15s;
}

/* Hover / focus visuel du header */
.sidebar .mat-expansion-panel-header:hover,
.sidebar .mat-expansion-panel-header:focus-visible {
    background: $sidebar-bg-hover !important;
    color: #fff;
}

/* Ripple discret */
.sidebar .mat-expansion-panel-header .mat-ripple-element {
    background: rgba(255,255,255,0.15);
}

/* ---------- Panel ouvert (état .mat-expanded) ----------
   - Fond unifié
   - Poids du header renforcé */
.sidebar .mat-expansion-panel.mat-expanded,
.sidebar .mat-expansion-panel.mat-expanded > .mat-expansion-panel-header,
.sidebar .mat-expansion-panel.mat-expanded .mat-expansion-panel-body {
    background: $sidebar-bg-hover !important;
}

.sidebar .mat-expansion-panel.mat-expanded {
    border-bottom: 1px solid rgba(255,255,255,0.10);
}

.sidebar .mat-expansion-panel.mat-expanded > .mat-expansion-panel-header {
    font-weight: 600 !important;           // Gras uniquement quand ouvert
}

/* ---------- Corps / contenu du panel ----------
   - Wrapper sans padding
   - Body: padding bas 16px (respiration) */
.sidebar .mat-expansion-panel-content {
    margin: 0;
    padding: 0 !important;
    background: transparent !important;
    border-radius: 0 !important;
}

.sidebar .mat-expansion-panel-body {
    margin: 0;
    padding: 0 0 16px !important;
    background: transparent !important;
    border-radius: 0 !important;
}

/* Sous-panels (si imbriqués) */
.sidebar .mat-expansion-panel-body .mat-expansion-panel {
    margin: 0;
    border-left: 0;
    border-right: 0;
}

/* ---------- Listes de navigation Material ---------- */
.sidebar mat-nav-list {
    margin: 0;
    padding: 0;
    background: transparent;
    display: block;
}

.sidebar .mat-expansion-panel-body > mat-nav-list {
    padding: 0;
}

/* ---------- Items navigation ----------
   - Hauteur compacte
   - Recul latéral 16px (aligné header) */
.sidebar mat-nav-list .mat-mdc-list-item,
.sidebar a.mat-mdc-list-item {
    display: flex;
    align-items: center;
    height: 40px;
    margin: 0;
    padding: 0 16px;
    border-radius: 0 !important;
    color: inherit;
    background: transparent;
    text-decoration: none;
    transition: background .15s, color .15s;
}

/* Survol item */
.sidebar mat-nav-list .mat-mdc-list-item:hover,
.sidebar a.mat-mdc-list-item:hover {
    background: $sidebar-bg-hover;
    color: #fff;
}

/* Item actif (gradient) */
.sidebar mat-nav-list .mat-mdc-list-item.active,
.sidebar mat-nav-list .mat-mdc-list-item.mdc-list-item--activated {
    background: $active-gradient;
    color: #fff;
}

/* ---------- Navigation simple custom (hors Material) ---------- */
.sidebar nav {
    display: flex;
    flex-direction: column;
    padding: 12px 0 4px;
    margin: 0;
}

.sidebar nav a {
    display: block;
    width: 100%;
    padding: 10px 16px;
    font-size: 14px;
    text-decoration: none;
    color: inherit;
    border-radius: 4px;
    transition: background .15s, color .15s;
}

.sidebar nav a:hover,
.sidebar nav a.active {
    background: $sidebar-bg-hover;
    color: #fff;
}

/* ---------- Icônes ---------- */
.sidebar .mat-icon,
.sidebar mat-nav-list .mat-mdc-list-item .mat-icon,
.sidebar .mat-expansion-panel-header .mat-icon {
    color: #fff;
    fill: #fff;
    transition: color .15s, fill .15s;
}

/* ---------- Accessibilité (focus visible) ---------- */
.sidebar a:focus-visible,
.sidebar .mat-mdc-list-item:focus-visible,
.sidebar .mat-expansion-panel-header:focus-visible {
    outline: 2px solid #fff;
    outline-offset: 2px;
}

/* ---------- Zone contenu principale ---------- */
.dashboard-content {
    flex: 1;
    padding: 24px;
    background: #f8f9fa;
    box-sizing: border-box;
    overflow: auto;
}

/* ---------- Optimisation performance (GPU hint) ---------- */
.sidebar nav a,
.sidebar mat-nav-list .mat-mdc-list-item,
.sidebar .mat-expansion-panel,
.sidebar .mat-expansion-panel-header,
.sidebar .mat-expansion-panel-body {
    will-change: background, color;
}
