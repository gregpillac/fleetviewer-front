<nav class="side-menu" [class.collapsed]="collapsed">
    <!-- Bouton rond bleu quand replié (remplace toute la sidebar) -->
    <div class="fab-toggle" (click)="toggle()" matTooltip="Ouvrir le menu">
        <mat-icon>chevron_right</mat-icon>
    </div>

    <!-- Surface du menu complète (visible uniquement quand déplié) -->
    <div class="menu-surface" *ngIf="!collapsed">

        <!-- Entête avec bouton pour replier -->
        <div class="menu-header">
            <button mat-icon-button (click)="toggle()" aria-label="Replier le menu">
                <mat-icon matTooltip="Replier le menu">chevron_left</mat-icon>
            </button>
            <span class="menu-title">Menu</span>
        </div>

        <mat-divider></mat-divider>

        <!-- Accordéon -->
        <mat-accordion [multi]="false" displayMode="flat" class="accordion">

            <!-- Titre “Dashboard” -->
            <div class="section-title">
                <span>Dashboard</span>
            </div>

            <!-- Hub -->
            <mat-nav-list class="child list-one" disableRipple>
                <a mat-list-item routerLink="/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                    <div class="list-title">
                        <mat-icon>dashboard</mat-icon>
                        <span>Hub</span>
                    </div>
                </a>
            </mat-nav-list>

            <!-- Utilisateurs -->
            <mat-expansion-panel class="child" hideToggle>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>group</mat-icon>
                        <span>Utilisateurs</span>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-nav-list class="list-expanded" disableRipple>
                    <a mat-list-item routerLink="/dashboard/users" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                        <span>Liste des utilisateurs</span>
                    </a>
                    <a mat-list-item routerLink="/dashboard/users/add" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                        <div class="list-title">
                            <mat-icon>person_add</mat-icon>
                            <span>Nouvel utilisateur</span>
                        </div>
                    </a>
                </mat-nav-list>
            </mat-expansion-panel>

            <!-- Véhicules -->
            <mat-expansion-panel class="child"  hideToggle>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>directions_car</mat-icon>
                        <span>Véhicules</span>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-nav-list class="list-expanded" disableRipple>
                    <a mat-list-item routerLink="/dashboard/vehicles" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                        <span>Liste des véhicules</span>
                    </a>
                    <a mat-list-item routerLink="/dashboard/vehicles/add" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                        <div class="list-title">
                            <mat-icon>add_circle</mat-icon>
                            <span>Nouveau véhicule</span>
                        </div>
                    </a>
                </mat-nav-list>
            </mat-expansion-panel>

            <!-- Réservations -->
            <mat-expansion-panel class="child"  hideToggle>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <mat-icon>book</mat-icon>
                        <span>Réservations</span>
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-nav-list class="list-expanded" disableRipple>
                    <a mat-list-item routerLink="/dashboard/reservations" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                        <span>Liste des réservations</span>
                    </a>
                    <a mat-list-item routerLink="/dashboard/reservations/pending" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                        <div class="list-title">
                            <mat-icon>search</mat-icon>
                            <span>Traiter les demandes</span>
                        </div>
                    </a>
                    <a mat-list-item routerLink="/dashboard/reservations/add" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                        <div class="list-title">
                            <mat-icon>add_circle</mat-icon>
                            <span>Nouvelle réservation</span>
                        </div>
                    </a>
                </mat-nav-list>
            </mat-expansion-panel>

            <mat-divider></mat-divider>

            <!-- Actions -->
            <mat-nav-list class="list-one" disableRipple>
                <a mat-list-item routerLink="/search-ride" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                    <div class="list-title">
                        <mat-icon>location_on</mat-icon>
                        <span>Demande de trajet</span>
                    </div>
                </a>
            </mat-nav-list>

            <mat-nav-list class="list-one" disableRipple>
                <a mat-list-item routerLink="/rides" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                    <div class="list-title">
                        <mat-icon>location_on</mat-icon>
                        <span>Mes trajets</span>
                    </div>
                </a>
            </mat-nav-list>

        </mat-accordion>
    </div>
</nav>
